<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Content Controls Form</title>
    <link rel="stylesheet" href="content.css">
</head>
<body>
<h1>Node</h1>
<div class="form-grid">

    <!-- ===================================================== -->
    <!--  GÓRNA RAMKA 1×4                                      -->
    <!-- ===================================================== -->
    <fieldset class="row-fieldset">
        <div class="row row-top">

            <!-- Data dodania -->
            <div class="cell">
                <label>Data dodania</label>

                <div class="date-control">
                    <button type="button" class="date-btn date-btn-left">
                        <img src="svg-folder/LeftIcon.svg" alt="">
                    </button>

                    <input type="date" class="date-input">

                    <button type="button" class="date-btn date-btn-calendar">
                        <img src="svg-folder/CalendarIcon.svg" alt="">
                    </button>

                    <button type="button" class="date-btn date-btn-right">
                        <img src="svg-folder/RightIcon.svg" alt="">
                    </button>
                </div>
            </div>

            <!-- Zadania nadrzędne -->
            <div class="cell">
                <label>Zadania nadrzędne</label>
                <select>
                    <option>Transport owiec</option>
                    <option>Naprawa maszyny</option>
                    <option>Procedura 08</option>
                </select>
            </div>

            <!-- Status zadania -->
            <div class="cell">
                <label>Status zadania</label>
                <select>
                    <option>Otwarte</option>
                    <option>Zamknięte</option>
                    <option>Usuń zadanie</option>
                </select>
            </div>

            <!-- pusta kolumna -->
            <div class="cell empty"><label>&nbsp;</label></div>

        </div>
    </fieldset>

    <!-- ===================================================== -->
    <!--  RZĄD: Nazwa, Typ, Zlecający, Odpowiedzialny           -->
    <!-- ===================================================== -->
    <fieldset class="row-fieldset">
        <div class="row">

            <div class="cell">
                <label>Nazwa zadania</label>
                <input type="text">

                <label>Zlecający</label>
                <select>
                    <option>Ja</option>
                    <option>Jan Kowalski</option>
                    <option>Sławomir</option>
                </select>
            </div>

            <div class="cell">
                <label>Typ zadania</label>
                <select>
                    <option>publiczne</option>
                    <option>prywatne</option>
                </select>

                <label>Odpowiedzialny</label>
                <select>
                    <option>Ja</option>
                    <option>Jan Kowalski</option>
                    <option>Sławomir</option>
                </select>
            </div>

            <div class="cell">
                <label>Opis skrócony</label>
                <textarea rows="3"></textarea>
            </div>

            <div class="cell">
                <label>Opis pełny</label>
                <textarea rows="3"></textarea>
            </div>

        </div>
    </fieldset>

    <!-- ===================================================== -->
    <!--  RZĄD: Waga + Termin kontrahenta                       -->
    <!-- ===================================================== -->
    <fieldset class="row-fieldset">
        <div class="row">

            <div class="cell">
                <label>Waga kontrahenta</label>
                <input type="number" min="1" max="5" class="weight-input">
            </div>

            <div class="cell">
                <label>Termin kontrahenta</label>

                <div class="date-control">
                    <button class="date-btn date-btn-left">
                        <img src="svg-folder/LeftIcon.svg">
                    </button>

                    <input type="date" class="date-input">

                    <button class="date-btn date-btn-calendar">
                        <img src="svg-folder/CalendarIcon.svg">
                    </button>

                    <button class="date-btn date-btn-right">
                        <img src="svg-folder/RightIcon.svg">
                    </button>
                </div>
            </div>

            <div class="cell empty"><label>&nbsp;</label></div>
            <div class="cell empty"><label>&nbsp;</label></div>

        </div>
    </fieldset>

    <!-- ===================================================== -->
    <!--  RZĄD: Waga + Termin wewnętrzny                        -->
    <!-- ===================================================== -->
    <fieldset class="row-fieldset">
        <div class="row">

            <div class="cell">
                <label>Waga wewnętrzna</label>
                <input type="number" min="1" max="5" class="weight-input">
            </div>

            <div class="cell">
                <label>Termin wewnętrzny</label>

                <div class="date-control">
                    <button class="date-btn date-btn-left">
                        <img src="svg-folder/LeftIcon.svg">
                    </button>

                    <input type="date" class="date-input">

                    <button class="date-btn date-btn-calendar">
                        <img src="svg-folder/CalendarIcon.svg">
                    </button>

                    <button class="date-btn date-btn-right">
                        <img src="svg-folder/RightIcon.svg">
                    </button>
                </div>
            </div>

            <div class="cell empty"><label>&nbsp;</label></div>
            <div class="cell empty"><label>&nbsp;</label></div>

        </div>
    </fieldset>

    <!-- ===================================================== -->
    <!--  Opis IronInsight                                      -->
    <!-- ===================================================== -->
    <fieldset class="row-fieldset">
        <div class="row">
            <div class="cell">
                <label>Opis IronInsight</label>
                <textarea rows="16">
IronInsight to narzędzie, które wprowadza brutalną efektywność do świata danych...
                </textarea>
            </div>

            <div class="cell empty"></div>
            <div class="cell empty"></div>
            <div class="cell empty"></div>
        </div>
    </fieldset>

</div>

<!-- ===================================================== -->
<!--  KONTROLKI FONTÓW                                     -->
<!-- ===================================================== -->
<div class="content-controls">
    Czcionka:
    <select id="content-font-select"></select>

    Rozmiar:
    <input id="content-font-size" type="number" min="10" max="32">

    Szarość:
    <input id="content-font-opacity" type="number" min="0" max="100">

    <button id="content-refresh" class="content-refresh-button">REFRESH</button>
</div>

<!-- ===================================================== -->
<!--  DOLNE PRZYCISKI                                      -->
<!-- ===================================================== -->
<div class="content-buttons">
    <button class="content-btn content-btn-ok">OK</button>
    <button class="content-btn content-btn-activate">AKTYWUJ</button>
    <button class="content-btn content-btn-stop">STOP</button>
    <button class="content-btn content-btn-no">NIE</button>
    <button class="content-btn content-btn-cancel">CANCEL</button>
    <button class="content-btn content-btn-add">DODAJ</button>
</div>

<!-- ===================================================== -->
<!--  JS — pełne, bez skracania                             -->
<!-- ===================================================== -->

<script>
/* --------------------------
   LOGIKA FONTÓW CONTENT
-------------------------- */
(function() {
    const defaultFont = "Open Sans";
    const defaultSize = 14;
    const defaultOpacity = 100;

    const fonts = [
        "FrutigerNeue Bold","FrutigerNeue Light",
        "Inconsolata Condensed Medium","Inconsolata Condensed Regular",
        "Inconsolata Condensed SemiBold",
        "Open Sans","Samsung Sans","Satoshi","Inter",
        "Geograph","DieGrotesk","Manrope","Larke Neue Thin",
        "Liberation Sans","Libra Sans","Opening Hours Sans",
        "Sora","Poppins Light","Plus Jakarta Sans","Nimbus Sans",
        "Minecraftia","Ubuntu Light","Roboto","Segoe UI Thin",
        "Cantarell","Exo 2","Aileron Light","Montserrat Light"
    ];

    const fontSelect   = document.getElementById("content-font-select");
    const sizeInput    = document.getElementById("content-font-size");
    const opacityInput = document.getElementById("content-font-opacity");
    const refreshBtn   = document.getElementById("content-refresh");

    fontSelect.innerHTML = fonts.map(f => `<option value="${f}">${f}</option>`).join("");

    const STORAGE_KEY = "contentFrameSettings";

    function loadSettings() {
        try { return JSON.parse(localStorage.getItem(STORAGE_KEY)); }
        catch(e){ return null; }
    }

    function saveSettings(settings) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(settings));
    }

    function apply(settings) {
        document.documentElement.style.setProperty("--content-font-family", settings.font);
        document.documentElement.style.setProperty("--content-font-size", settings.size + "px");
        document.documentElement.style.setProperty("--content-opacity", settings.opacity / 100);
    }

    function refresh() {
        const settings = {
            font: fontSelect.value || defaultFont,
            size: parseInt(sizeInput.value) || defaultSize,
            opacity: Math.min(100, Math.max(0, parseInt(opacityInput.value)))
        };
        saveSettings(settings);
        apply(settings);
    }

    const initial = loadSettings() || { font: defaultFont, size: defaultSize, opacity: defaultOpacity };
    fontSelect.value = initial.font;
    sizeInput.value  = initial.size;
    opacityInput.value = initial.opacity;

    apply(initial);
    refreshBtn.addEventListener("click", refresh);
})();
</script>

<script>
/* --------------------------
   DATY: LEWO / PRAWO / KALENDARZ
-------------------------- */
(function() {

    function toISODate(d) {
        return d.toISOString().split("T")[0];
    }

    function shiftDate(input, delta) {
        let d;
        if (input.value) {
            d = new Date(input.value);
            if (isNaN(d.getTime())) d = new Date();
        } else {
            d = new Date();
        }
        d.setDate(d.getDate() + delta);
        input.value = toISODate(d);
    }

    document.querySelectorAll(".date-control").forEach(control => {
        const input    = control.querySelector(".date-input");
        const btnLeft  = control.querySelector(".date-btn-left");
        const btnRight = control.querySelector(".date-btn-right");
        const btnCal   = control.querySelector(".date-btn-calendar");

        if (!input.value)
            input.value = toISODate(new Date());

        btnLeft.addEventListener("click", () => shiftDate(input, -1));
        btnRight.addEventListener("click", () => shiftDate(input, +1));

        btnCal.addEventListener("click", () => {
            if (typeof input.showPicker === "function")
                 input.showPicker();
            else {
                input.click();
                setTimeout(() => input.focus(), 0);
            }
        });
    });

})();
</script>

<script>
/* --------------------------
   LOGIKA RAMKI WAG (4=żółta, 5=czerwona)
-------------------------- */
(function() {
    const weightInputs = document.querySelectorAll(".weight-input");

    function updateWeightBorder(input) {
        const v = parseInt(input.value, 10);
        input.classList.remove("weight-4", "weight-5");

        if (v === 4)      input.classList.add("weight-4");
        else if (v === 5) input.classList.add("weight-5");
    }

    weightInputs.forEach(input => {
        updateWeightBorder(input);
        input.addEventListener("input",  () => updateWeightBorder(input));
        input.addEventListener("change", () => updateWeightBorder(input));
    });
})();
</script>
<script>
(function() {
    const frame = document.getElementById("content-frame");
    const fontSel = document.getElementById("font-select");
    const sizeSel = document.getElementById("font-size");
    const opacitySel = document.getElementById("font-opacity");
    const refresh = document.getElementById("refresh");

    function applyToIframe() {
        const doc = frame.contentDocument;
        if (!doc) return;

        doc.documentElement.style.setProperty("--content-font-family", fontSel.value);
        doc.documentElement.style.setProperty("--content-font-size", sizeSel.value + "px");
        doc.documentElement.style.setProperty("--content-opacity", opacitySel.value / 100);
    }

    refresh.addEventListener("click", applyToIframe);

    frame.addEventListener("load", () => {
        applyToIframe();
    });
})();
</script>
</body>
</html>
